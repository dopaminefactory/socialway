<!DOCTYPE html>
<html lang="en">
<head>

  <!-- Basic Page Needs
  –––––––––––––––––––––––––––––––––––––––––––––––––– -->
  <meta charset="utf-8">
  <title>소셜웨이 💘</title>
  <meta name="description" content="대학생 매칭 플랫폼 소셜웨이 💘">

  <!-- Mobile Specific Metas
  –––––––––––––––––––––––––––––––––––––––––––––––––– -->
  <meta name="viewport" content="width=device-width, initial-scale=1">


  <!-- CSS
  –––––––––––––––––––––––––––––––––––––––––––––––––– -->
  <link href="./dist/index.css" rel="stylesheet">

  <!-- Favicon
  –––––––––––––––––––––––––––––––––––––––––––––––––– -->
  <!-- <link rel="icon" type="image/png" href="images/favicon.png"> -->
  
</head>
<body>
    <div class="mx-auto max-w-screen-xl px-4 py-32 lg:flex lg:h-screen lg:items-center">
      <div class="mx-auto max-w-xl text-center">
        <h1 class="text-3xl font-extrabold sm:text-5xl">
          두근 두근 퀸쿠아트리아 💘
        </h1>
  
        <p class="mt-4 sm:text-xl/relaxed">
          오늘 축제를 함께 즐길 내 운명의 상대는?
        </p>
          <div class="gap-4 mt-8 flex flex-wrap justify-center">
            <a
              target="_blank"
              id="matching-button"
              class="block w-full rounded bg-red-600 px-12 py-3 text-lg font-medium text-white shadow hover:bg-red-700 focus:outline-none focus:ring active:bg-red-500"
              href="#"
            >
              오늘 8시에 매칭 받기
            </a>
            <a
              target="_blank"
              id="pool-button"
              class="underline w-full w-full px-12 py-3 text-xs font-medium text-red-600 hover:text-red-700 focus:outline-none focus:ring active:text-red-500"
              href="#"
            >
              축제랑 상관 없이 <span id="typed">재밌는</span> 사람 만나고 싶어
            </a>
        </div>
      </div>
    </div>
  

  <!-- End Document
  –––––––––––––––––––––––––––––––––––––––––––––––––– -->
</body>
<script>
  const humanType = document.getElementById("typed");

  // 글자 모음
  const letters = [
    "재밌는",
    "귀여운",
    "잘생긴",
    "예쁜",
    "키 큰",
    "키 작은",
    "똑똑한",
    "멋있는",
    "건장한",
    "날씬한",
    "통통한"
  ];
  
  const matchingUrl = new URL("https://tally.so/r/nP1qW0") // TODO: change this
  const poolUrl = new URL("https://tally.so/r/wbjJJ6") // TODO: change this
  
  window.onload = function() {
    const target = new URLSearchParams(window.location.search).get("from")
  
    if (target) {
      matchingUrl.searchParams.append("from", target)
      poolUrl.searchParams.append("from", target)
    }
  
    document.getElementById("pool-button").setAttribute("href", poolUrl.href)
    document.getElementById("matching-button").setAttribute("href", matchingUrl.href)

    setTimeout(() => {
      typing(humanType, letters)
    }, 1500)
  }

  

  // 글자 입력 속도
  const speed = 50;

  const writeText = async (htmlElement, text) => {
    while(text.length) {
      await wait(speed);
      htmlElement.innerHTML += text.shift();
    }
  }

  // 타이핑 효과
  const typing = async (htmlElement, letters) => {  
    let i = 1;
    while(true) {
      const letter = letters[i].split("");
      await removeText(htmlElement);
      await writeText(htmlElement, letter);
      await wait(1000);
      i++;
      i %= letters.length;
    }
  }

  // 글자 지우는 효과
  const removeText = async (htmlElement) => {
    let len = htmlElement.innerHTML.length;
    while (len) {
      await wait(speed);
      htmlElement.innerHTML = htmlElement.innerHTML.slice(0, -1);
      len--;
    }
  }

  // 딜레이 기능 ( 마이크로초 )
  function wait(ms) {
    return new Promise(res => setTimeout(res, ms))
  }
</script>
</html>
